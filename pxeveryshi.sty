%
% pxeveryshi.sty
% written by Takayuki Yato (ZR)
%
% This package is distributed as part of the platex-tools bundle
% maintained by Hironobu Yamashita
% by courtesy of the original author.
% https://github.com/aminophen/platex-tools
%

\NeedsTeXFormat{pLaTeX2e}
\ProvidesPackage{pxeveryshi}
    [2012/05/19 v0.1 everyshi package for pLaTeX]
%
\ifx\@EveryShipout@Output\@undefined
  % LaTeX2e 2020-10-01 or newer simulates everyshi
  \declare@file@substitution{everyshi.sty}{pxeveryshi.sty}%
  \long\def\EveryShipout#1{%
    \AddToHook{shipout/before}{\vbox{\yoko #1}}}%
  \long\def\AtNextShipout#1{%
    \AddToHookNext{shipout/before}{\vbox{\yoko #1}}}
\else
  \RequirePackageWithOptions{everyshi}
  \def\@EveryShipout@Output{%
    \setbox8\vbox{%
      \yoko
      \@EveryShipout@Hook
      \@EveryShipout@AtNextHook
      \global\setbox\@cclv=\box\@cclv
    }%
    \gdef\@EveryShipout@AtNextHook{}%
    \@EveryShipout@Org@Shipout\box\@cclv
  }
\fi
%
\endinput
%% EOF
